colorscheme catppuccin_macchiato
set-option global ui_options terminal_assistant=none terminal_enable_mouse=false

add-highlighter global/ wrap -word
add-highlighter global/ show-matching
add-highlighter global/ show-whitespaces -lf '⏎' -spc ' ' -tab '→' -nbsp '⍽' -tabpad '·'

enable-auto-pairs

eval %sh{kak-lsp --kakoune --session $kak_session}
lsp-enable
set-option global lsp_hover_anchor true
set-option global lsp_auto_show_code_actions true
lsp-auto-hover-enable

evaluate-commands %sh{
    autoload_directory() {
        find -L "$1" -type f -name '*\.kak' \
            | sed 's/.*/try %{ source "&" } catch %{ echo -debug Autoload: could not load "&" }/'
    }
    if [ -d "${kak_runtime}/rc" ]; then
        autoload_directory ${kak_runtime}/rc
    fi
}
